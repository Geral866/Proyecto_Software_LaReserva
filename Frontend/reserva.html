<!DOCTYPE html>
<html lang="es">
<head>
  <title>La Reserva - Nueva Reserva</title>
  <style> /* Mismo CSS que arriba */ </style>
</head>
<body>
  <div class="container">
    <h1>Nueva Reserva (RF2)</h1>
    <form id="reservaForm">
      <input type="email" id="email" placeholder="Tu Email Registrado" required>
      <input type="date" id="fecha" required>
      <input type="time" id="hora" required>
      <input type="number" id="personas" placeholder="NÂº Personas" min="1" max="10" required>
      <button type="submit">Reservar</button>
    </form>
    <div id="resultado"></div>
    <p><a href="/register">Registrarse Primero</a> | <a href="/reservations">Ver Mis Reservas</a></p>
  </div>
  <script>
    document.getElementById('reservaForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData();
      formData.append('email', document.getElementById('email').value);
      formData.append('fecha', document.getElementById('fecha').value);
      formData.append('hora', document.getElementById('hora').value);
      formData.append('personas', document.getElementById('personas').value);
      const res = await fetch('/reservations', { method: 'POST', body: formData });
      const data = await res.json();
      document.getElementById('resultado').innerHTML = data.mensaje || data.error;
      document.getElementById('resultado').className = res.ok ? 'exito' : 'error';
    });
  </script>
</body>
</html>

